<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>PJ KalkPro1.0</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="favicon.ico">
</head>
<body>
<div id="app" class="hidden">
<img src="logo.png" class="logo">

<!-- Countdown -->
<div id="release-info">Release: V1.0.10</div>
<div id="timer">Logout in: 10:00</div>

<!-- NEU: Angemeldet als -->
<div id="login-info"></div>

<div id="user-actions" class="hidden">
  <select id="user-action-select" onchange="handleUserAction(this.value)">
    <option value="">Aktion auswählen…</option>

    <optgroup label="Aktionen">
    <option value="clear">Eingaben löschen</option>
    <option value="changePw">Passwort ändern</option>
    <option value="logout">⏻ Abmelden</option>
    </optgroup>

    <option value="nav:page-3">➡️ Auswahl KV/Anfrage</option>

    <optgroup label="Neubau">
    <option value="nav:page-7">➡️ Hauptmenü Neubau</option>
    <option value="nav:page-14-1">Tackersystem</option>
    <option value="nav:page-26">Klettsystem</option>
    <option value="nav:page-29">Noppensystem</option>
    <option value="nav:page-33">Industrieboden</option>
    </optgroup>

    <optgroup label="Sanierung">
    <option value="nav:page-6">➡️ Hauptmenü Sanierung</option>
    <option value="nav:page-8">Frässystem</option>
    <option value="nav:page-10">3mm Klett</option>
    <option value="nav:page-11">Trockenbausystem</option>
    </optgroup>

    <optgroup label="Estrich + Unterdämmung">
    <option value="nav:page-9">Estrich</option>
    <option value="nav:page-18">Unterdämmung</option>
    </optgroup>
    
    <option value="nav:page-20">➡️ Verteiler & Regeltechnik</option>
    <option value="nav:page-21">➡️ Dienstleistung</option>
    <option value="nav:page-22">➡️ Zuschläge</option>

    
  </select>
</div>


<!-- SEITE 0: STARTSEITE -->
<div class="page active" id="page-start">
  
  <div class="start-slogan">
    Fußbodenheizung-Montage<br><br>
    ...von Aufmaß bis Zeitmanagement...
  </div>
</div>

<!-- SEITE 1: LOGIN -->
<div class="page" id="page-login">
    <h2>Login</h2>

    <input id="loginUser" type="email" placeholder="E-Mail">
    <input id="loginPass" type="password" placeholder="Passwort">

    <div class="error" id="loginError"></div>

    <button onclick="login()">Anmelden</button>

    <button onclick="forgotPassword()">Passwort vergessen</button><br><br>
<p>(Auf dem Smartphone genießen Sie die optimale Ansicht im Querformat.)</p>
    
</div>

<!-- SEITE 2: PASSWORT ÄNDERN -->
<div class="page" id="page-change">
    <h2>Passwort ändern</h2>

    <input id="oldPass" type="password" placeholder="Altes Passwort">
    <input id="newPass1" type="password" placeholder="Neues Passwort">
    <input id="newPass2" type="password" placeholder="Neues Passwort wiederholen"><br><br>

<p><strong>Passwortrichtlinie:</strong> mind. 8 Zeichen, Großbuchstaben, Kleinbuchstaben, Sonderzeichen, numerische Zeichen</p><br><br>

    <div class="error" id="changeError"></div>

    <button onclick="savePassword()">Speichern</button>
    <button onclick="showPage('page-3')">Abbrechen</button>
</div>

<!-- SEITE 3: AUSWAHL -->
<div class="page" id="page-3">
    <h2>Bitte auswählen</h2>

    <button onclick="showPage('page-4')">KV</button>
    <button onclick="showPage('page-5')">Anfrage an NDF</button>
  
    <p class="hint">
        KV = Kostenvoranschlag – die schnelle und direkte Ermittlung eines Richtpreises für den Kunden<br><br>
        Anfrage an NDF – Ermittlung eines Richtpreises für den Kunden, jedoch mit der Möglichkeit ein qualifiziertes Angebot von NDF per Mail anzufragen.<br>
    </p>
      <button id="btnExportLog" class="hidden" onclick="exportLoginLog()">Login-Log herunterladen</button>

</div>

<!-- SEITE 4: HAUPTMENÜ -->
<div class="page" id="page-4">
    <h2>Hauptmenü</h2>

    <button onclick="showPage('page-6')">Sanierung</button>
    <button onclick="showPage('page-7')">Neubau</button>
    <br>
    <br>
    <br>
    <button onclick="showPage('page-3')">Zurück zur Auswahl "KV oder Anfrage"</button>
    </div>

<!-- SEITE 5: ANFRAGE AN NDF -->
<div class="page" id="page-5">
    <h2>Anfrage an NDF</h2>

    <div class="input-field">
        <input id="pj-contact" placeholder="Ansprechpartner bei PJ">
    </div>
    <div class="input-field">
        <input id="pj-number" placeholder="SHK – PJ-Kunden-Nr.">
    </div>
    <div class="input-field">
        <input id="shk-name" placeholder="SHK Name/Firma">
    </div>
    <div class="input-field">
        <input id="shk-contact" placeholder="SHK Ansprechpartner">
    </div>
    <div class="input-field">
        <input id="shk-email" type="email" placeholder="SHK E-Mail">
    </div>
    <div class="input-field">
        <input id="shk-phone" placeholder="SHK Telefon-Nr.">
    </div>
    <div class="input-field">
        <input id="site-address" placeholder="Adresse Baustelle">
    </div>
    <p class="hint">
        <strong>Gewünschter Ausführungstermin:</strong><br>
    </p>
    <div class="input-field">
        <input id="execution-date" type="date" placeholder="Gewünschter Ausführungstermin">
    </div>
    <p class="hint"><u>Für eine optimale Angebotserstellung, fügen Sie bitte der E-Mail als Anhang bei:</u><br><br>
        <strong>• Bemaßter Grundriss</strong> (PDF oder DWG)<br>
        <strong>• Gebäudeschnitt / Ansichten</strong> -> Wenn Dämmung angeboten werden soll.<br>
        <strong>• EnEV-/GEG-Nachweis oder U-Wert-Vorgaben</strong> (Vorgabe der WLG)<br>
        <strong>• Heizlastberechnung</strong> (falls vorhanden)<br>
    <br>
    </p>

    <div class="error" id="page5-error" style="color:darkred; margin:10px;"></div>

    <div class="button-bar">
        <button onclick="submitPage5()">Eingabe und Weiter</button>
        <button onclick="direktZumAngebot()">Eingabe und Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 6: HAUPTMENÜ SANIERUNG -->
<div class="page" id="page-6">
    <h2>Hauptmenü Sanierung</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-8')">Fräsen</button><br>
        <button onclick="showPage('page-9')">Estrich</button><br>
        <button onclick="showPage('page-10')">Klett 3mm</button><br>
        <button onclick="showPage('page-11')">Trockenbau</button>
    </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-18')">Weiter</button>
    </div>
</div>

<!-- SEITE 7: HAUPTMENÜ NEUBAU -->
<div class="page" id="page-7">
    <h2>Hauptmenü Neubau</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-9')">Estrich</button><br>
        <button onclick="showPage('page-13')">unbeheizte Fläche</button><br>
        <button onclick="showPage('page-14-1')">Tackersystem</button><br>
        <button onclick="showPage('page-26')">Klettsystem</button><br>
        <button onclick="showPage('page-29')">Noppensystem</button><br>
        <button onclick="showPage('page-33')">Industrieboden</button><br>
	<button onclick="showPage('page-18')">Unterdämmung</button>
    </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        
    </div>
</div>

<!-- SEITE 14: TACKERSYSTEM -->
<div class="page" id="page-14">
    <h2>Tackersystem</h2>

    <div id="page14-content" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 14.1: AUSWAHL MARKE -->
<div class="page" id="page-14-1">
    <h2>Auswahl Marke</h2>

    <button onclick="showPage('page-14')">Handelsmarke</button>
    <button onclick="showPage('page-14-2')">Uponor</button>
    <button onclick="showPage('page-14-3')">Roth</button>

    <br><br>

    <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
</div>

<!-- SEITE 14.3: ROTH -->
<div class="page" id="page-14-3">

       <div id="content-14-3" class="price-table"></div>

<div class="button-bar">
                <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
                <button onclick="showPage('page-18')">Weiter</button>
                <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
               </div>
</div>

<!-- SEITE 40: KOSTENVORANSCHLAG / ANFRAGE -->
<div class="page" id="page-40">
    <h2 id="page40-title">Kostenvoranschlag</h2>

    <!-- Anfrage-Daten (nur bei Anfrage sichtbar) -->
    <div id="anfrage-daten" style="display:none; margin:20px auto; max-width:1100px; text-align:left;">
    <div class="subtitle">Anfrage-Daten</div>
    <div id="anfrage-daten-content"></div>
    <hr style="margin:20px 0;">
    </div>

    <!-- Zusammenfassung der Mengen -->
    <div id="summary-content"></div>

    <!-- Gesamtsumme / Angebotspreis -->
    <div id="angebotspreis" class="gesamt">Gesamtpreis: 0,00 €</div>
    <div id="angebotspreisRabatt" class="gesamt rabatt">
  Gesamtpreis abzgl. SHK-Rabatt (15%): 0,00 €
</div>

    <div style="text-align:center; margin-bottom:20px;">(netto, freibleibend)</div>

<div id="fraesen-hinweis-print" style="display:none; margin-top:20px; color:darkred; font-weight:600;">
  Achtung!<br>
  Bei Frässystemen können je nach Entfernung und Flächengröße zusätzliche Aufschläge anfallen.<br>
  Bitte erfragen Sie hierzu ein individuelles Angebot.
</div>


<!-- Allgemeine Hinweise aus CSV -->
    <div id="hinweise-content"></div>

<!-- Buttons -->
    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="printPage40()">Drucken / speichern als PDF</button>
        <button onclick="sendMailPage40()">Senden als Text-Mail</button>
        <button onclick="sharePdf()">PDF download</button>
        
    </div>
</div>

<!-- SEITE 41: Hinweis fehlende Anfrage-Daten -->
<div class="page" id="page-41">
    <h2>Hinweis</h2>

    <p>
        Für eine Anfrage an NDF müssen zuerst die Kontaktdaten vollständig ausgefüllt werden.
    </p>

    <div class="button-bar">
        <button onclick="showPage('page-5')">Zur Anfrage</button>
        <button onclick="showPage('page-40')">KV anzeigen</button>
    </div>
</div>

<!-- SEITE 14.2: UPONOR -->
<div class="page" id="page-14-2">

    <div id="content-14-2" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>

</div>

<!-- SEITE 8: Frässystem -->
<div class="page" id="page-8">
    <h2>Fräsen</h2>

    <div id="content-8" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück zum Hauptmenü Sanierung</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 18: Unterdämmung -->
<div class="page" id="page-18">
    <h2>Unterdämmung</h2>

    <div id="content-18" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 20: Verteiler & Regeltechnik -->
<div class="page" id="page-20">
    <h2>Verteiler & Regeltechnik</h2>

    <div id="content-20" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-21')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 21: Dienstleistungen -->
<div class="page" id="page-21">
    <h2>Dienstleistungen</h2>

    <div id="content-21" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-22')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 22: Zuschläge -->
<div class="page" id="page-22">
    <h2>Zuschläge</h2>

    <div id="content-22" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="direktZumAngebot()">Weiter</button>
    </div>
</div>

<!-- SEITE 9: Estrich -->
<div class="page" id="page-9">
    <h2>Estrich</h2>

    <div id="content-9" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 10: Klett3mm -->
<div class="page" id="page-10">
    <h2>Klett 3mm</h2>

    <div id="content-10" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-4')">Zurück zum Hauptmenü</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 11: MENÜ TROCKENBAU -->
<div class="page" id="page-11">
    <h2>Menü Trockenbau</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-23')">Aufbau 50mm</button><br>
        <button onclick="showPage('page-24')">Aufbau 20/30mm + 3mm Deckschicht</button><br>
        <button onclick="showPage('page-25')">Aufbau 25mm (XPS)</button><br>
    </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-6')">Zurück zum Hauptmenü Sanierung</button>
        <button onclick="showPage('page-18')">Weiter</button>
    </div>
</div>

<!-- SEITE 23: Aufbau 50mm -->
<div class="page" id="page-23">
    <h2>Aufbau 50mm</h2>

    <div id="content-23" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück zum Hauptmenü Sanierung</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 24: Aufbau 20/30mm + 3mm Deckschicht -->
<div class="page" id="page-24">
    <h2>Aufbau 20/30mm + 3mm Deckschicht</h2>

    <div id="content-24" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück zum Hauptmenü Sanierung</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 25: Aufbau 25mm (XPS) -->
<div class="page" id="page-25">
    <h2>Aufbau 25mm (XPS)</h2>

    <div id="content-25" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück zum Hauptmenü Sanierung</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 26: AUSWAHL MARKE Klett -->
<div class="page" id="page-26">
    <h2>Auswahl Marke Klettsystem</h2>

    <button onclick="showPage('page-27')">Handelsmarke</button>
    <button onclick="showPage('page-28')">Uponor</button>
    <br><br>

    <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
</div>

<!-- SEITE 29: AUSWAHL MARKE Noppensystem -->
<div class="page" id="page-29">
    <h2>Auswahl Marke Noppensystem</h2>

    <button onclick="showPage('page-30')">Handelsmarke</button>
    <button onclick="showPage('page-31')">Uponor</button>
    <button onclick="showPage('page-32')">Roth</button>
    <br><br>

    <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
</div>

<!-- SEITE 27: Klett Handelsmarke -->
<div class="page" id="page-27">
    <h2>Klettsystem Handelsmarke</h2>

    <div id="content-27" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 28: Klett Uponor -->
<div class="page" id="page-28">
    <h2>Klettsystem Uponor</h2>

    <div id="content-28" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 30: Noppen Handelsmarke -->
<div class="page" id="page-30">
    <h2>Noppensystem Handelsmarke</h2>

    <div id="content-30" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 31: Noppen Uponor -->
<div class="page" id="page-31">
    <h2>Noppensystem Uponor</h2>

    <div id="content-31" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 32: Noppen Roth -->
<div class="page" id="page-32">
    <h2>Noppensystem Roth</h2>

    <div id="content-32" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 33: Industrieboden -->
<div class="page" id="page-33">
    <h2>Industrieboden</h2>

    <div id="content-33" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 13: unbeheizte Fläche -->
<div class="page" id="page-13">
    <h2>unbeheizte Fläche</h2>

    <div id="content-13" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück zum Hauptmenü Neubau</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- Eieruhr auf Seite 40 -->
<div id="loader40" class="loader hidden">
  <div class="spinner"></div>
  <div class="loader-text">Ausgabe wird erstellt…</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script type="module" src="app.js"></script>

</body>
</html>
